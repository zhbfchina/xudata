<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>

    <link href="../css/template.css" rel="stylesheet" />
    <link href="../css/scrollbar.css" rel="stylesheet" />
    <!--<link href="../css/model.css" rel="stylesheet" />-->

    <link href="../css/modelzhz.css" rel="stylesheet" />

    <script src="../js/jquery-1.7.1.js"></script>
    <!--    <script src="../js/jQuery-2.1.4.min.js"></script>
    <script src="../js/jquery.cookie.js"></script>

    <script src="../library/echart/echarts.js"></script>
    <script src="../library/echart/dark.js"></script>
    <script src="../js/setTable.js"></script>
    <script src="../js/model.js"></script>-->
    <style type="text/css">
        #selectDiv {
            position: relative;
            height: 30%;
            width: 96%;
            margin-left: 2%;
            padding-top: 1%;
            background-color: rgba(91, 155, 213, 1);
            display: none;
        }

        .itemType {
            width: 100%;
            height: auto;
            float: left;
        }

        #selectDiv .itemType div {
            width: 16%;
            height: 3%;
            background-color: white;
            margin: 1%;
            float: left;
            padding: 1%;
            text-align: center;
            cursor: pointer;
        }

        .itemInfo {
            width: 100%;
            height: 100%;
            opacity: 0;/*不透明度*/
            position: absolute;
        }

        .item:hover .itemInfo {
            /*visibility: hidden;*/
            background-color: pink;
            opacity: 0.2;
        }

        .item-chart {
            width: 100%;
            height: 100%;
            position: absolute;
        }
    </style>
    <script type="text/javascript">
        //window.onload = function () {
        //    document.getElementById('selectID').onclick = function () {
        //        var dvObj = document.getElementById('selectDiv');
        //        // alert(dvObj.style.display);
        //        if (dvObj.style.display == '' || dvObj.style.display == 'none') {
        //            dvObj.style.display = "block";
        //        } else {
        //            dvObj.style.display = "none";
        //        }

        //    }
        //}

        //用jQuery方式写jQuery(document.getElementById()).onready=function(){}
        $(function () {
            //点击每个item时跳转到配置层
            //$('.item').click(function () {
            //    //直接跳转到配置层
            //    //$(window).attr('location', "item-config-index.html");
            //    //通过iframe跳转到配置层
            //    $('#mainframe').attr('src', "item-config-index.html");
            //})

            //通过a标签的href链接到配置页面
            //$('a .item').click(function () {
            //    $('.config-iframe-wrap').css('display', 'block');
            //})

            //通过iframe的src链接到配置界面
            $('.item').click(function () {
                $('.config-iframe-wrap').css('display', 'block');
            })

            //点击“筛选”时的事件
            $('#selectID').on("click", function () {
                var divObj = $('#selectDiv');
                if (divObj.css('display') == 'none' || divObj.css('display') == '') {
                    divObj.css('display', 'block');
                } else {
                    divObj.css('display', 'none');
                }
            })
            //点击“筛选”时的事件


            $(".itemType div").on("click", function () {//点击筛选层中的div

                if ($(this).hasClass("active")) {//判断点击的div有没有class="active"，如果以前选过，再次选择时会清除class=“active”，可以通过CSS样式来标记之前选过，即标记它已被选中
                    $(this).removeClass("active").css("background-color", "")
                } else {
                    $(this).addClass("active").css("background-color", "gray")
                }


                if ($(".itemType div.active").length == 0) {//如果条目类型中下的class=“active”个数等于0个
                    $("div.item").each(function () {//获取地名下的每个item（即给地名下的图表）进行循环遍历，添加CSS样式，将图表全部显示出来
                        $(this).css("display", "inline-block")
                    })
                }

                else {//如果条目类型中下的class=“active”个数不等于0个
                    $(".itemType div.active").each(function () {//获取条目类型中被选中的div，循环遍历
                        var type = $(this).attr("type")//★★★★★大前提准备工作：为筛选对话框中的每个图表标签div设置一个type属性，并获取type中的字符串值
                        $("div.item").each(function () {//获取地名下的每个item（即给地名下的图表）进行循环遍历，
                            var select = $(this).attr("select")//★★★★★大前提准备工作：为地名标签设置一个特有的select，以便点击地名时能选到那个地名栏
                            if (select.indexOf(type) >= 0) {//如果select值的字符串（每个item中定义的地名+图表类型，如xh_bar,xh_line）中包含type的值（图表筛选类型div定义的）     此判断意味着，只要下面各item中包含此类type就会被显示，否者被隐藏
                                $(this).css("display", "inline-block")
                            } else {
                                $(this).css("display", "none")
                            }
                        })
                    })
                }
            });

        })

        //（★★★★★注意：子页面和父页面相互调用的函数，一定要写在页面加载函数的外面）
        //在此父页面中定义一个关闭子页面的方法（关闭iframe框架下的html），目的：被子页面调用（★★★★★注意：此函数一定要写在页面加载函数的外面）
        function closeIframe() {
            $(".config-iframe-wrap").css("display", "none")
        }

        //将变量写到函数外面便于其他函数也能使用从子页面传过来的配置参数
        //获取子页面的传过来的实时数据的配置参数，在函数中进行处理
        var module_rt_config_interval;
        var module_rt_config_threshold;
        function real_time_configPara(a,b) {
             module_rt_config_interval = a;
             module_rt_config_threshold = b;
        }

        //将变量写到函数外面便于其他函数也能使用从子页面传过来的配置参数
        var module_ht_config_radio;
        var module_ht_config_threshold;
        //获取子页面的传过来的历史数据的配置参数，在函数中进行处理
        function history_configPara(a, b) {
             module_ht_config_radio = a;
             module_ht_config_threshold = b;
        }
    </script>
</head>
<body>
    <div class="banner2"></div>
    <div class="main">
        <div type="table" style="width: 500px; height: 468px;">
        </div>

        <div class="menu-shade">
            <div class="menu">
                <div class="navigation">
                    <div class="left-tab">110警情</div>
                    <div class="left-tab">电子警察</div>
                </div>
                <div class="content">
                    <!--筛选框，余灏哲直接绝对定位的，这里给一个div包裹着wrap-->
                    <div class="select-wrap">
                        <!--<div id="option" class="location-tab">筛选</div>-->
                        <div id="selectID" class="select select2">筛选</div>
                    </div>
                    <div id="selectDiv">
                        <div class="itemType">
                            <div type="scatter">单轴散点图</div>
                            <div type="line">基本折线图</div>
                            <div type="bar">基本柱状图</div>
                            <div type="bar">堆叠柱状图</div>
                            <div type="bar">正负轴柱状图</div>
                            <div type="pie">基本饼图</div>
                            <div type="pie">嵌套饼图</div>
                            <div type="pie">玫瑰图</div>
                            <div type="treemap">矩形树图</div>
                            <div type="sankey">桑基图</div>
                            <div type="heatmap">年日历图</div>
                            <div type="scatter">月日历图</div>
                            <div type="radar">雷达图</div>
                            <div type="effectScatter">地图散点图</div>
                            <div type="lines">地图迁徙图</div>
                        </div>
                        <div class="itemType">
                            <div type="FJ">分局</div>
                            <div type="ZA">治安支队</div>
                            <div type="XJH">徐家汇</div>
                            <div type="FL">枫林</div>
                            <div type="TP">天平</div>
                            <div type="HN">湖南</div>
                            <div type="HM">虹梅</div>
                            <div type="XT">斜土</div>
                            <div type="HJ">华泾</div>
                            <div type="CHJ">漕河泾</div>
                            <div type="LH">龙华</div>
                            <div type="CQ">长桥</div>
                            <div type="TL">田林</div>
                            <div type="KJ">康健</div>
                            <div type="LY">凌云</div>
                            <div type="NZ">南站</div>
                            <div type="ST">上体</div>
                        </div>
                    </div>

                    <!--一个item的位置（location）和相应容器，被包裹在一个div中（item-wrap），将这些div包裹在一个大的div中（items-wrap）-->
                    <div class="items-wrap">
                        <div class="item-wrap">
                            <div class="location-wrap">
                                <div class="location-tab">指挥中心</div>
                            </div>
                            <div class="item-container">

                                <!--<a href="item-config-index.html" target="config-content">-->
                                <div class="item" f="item" type="line" select="zhzx_line">
                                    <div class="item-chart">
                                        <div class="item-preview"></div>
                                        <div class="item-title">
                                            <div>2017年度徐汇区</div>
                                        </div>
                                    </div>

                                    <div class="itemInfo">
                                        <p>dataSource</p>
                                        <p>dataTable</p>
                                    </div>

                                </div>
                                <!--</a>-->


                                <div class="item" f="item" type="line" targer="" select="zhzx_line">
                                    <div class="item-chart">
                                        <div class="item-preview"></div>
                                        <div class="item-title">
                                            <div>2017年度徐汇区</div>
                                        </div>
                                    </div>
                                    <div class="itemInfo">
                                        <p>dataSource</p>
                                        <p>dataTable</p>
                                    </div>
                                </div>
                            </div>



                        </div>
                    </div>

                    <div class="item-wrap">
                        <div class="location-wrap">
                            <div class="location-tab">徐家汇派出所</div>
                        </div>
                        <div class="item-container">
                            <div class="item" f="item" type="bar" targer="" select="xjh_bar">
                                <div class="item-chart">
                                    <div class="item-preview"></div>
                                    <div class="item-title">
                                        <div>2017年度徐汇区</div>
                                    </div>
                                </div>

                                <div class="itemInfo">
                                    <p>dataSource</p>
                                    <p>dataTable</p>
                                </div>
                            </div>

                            <div class="item" f="item" type="bar" targer="" select="xjh_bar">
                                <div class="item-chart">
                                    <div class="item-preview"></div>
                                    <div class="item-title">
                                        <div>2017年度徐汇区</div>
                                    </div>
                                </div>

                                <div class="itemInfo">
                                    <p>dataSource</p>
                                    <p>dataTable</p>
                                </div>
                            </div>
                            <div class="item" f="item" type="bar" targer="" select="xjh_map">
                                <div class="item-chart">
                                    <div class="item-preview"></div>
                                    <div class="item-title">
                                        <div>2017年度徐汇区</div>
                                    </div>
                                </div>

                                <div class="itemInfo">
                                    <p>dataSource</p>
                                    <p>dataTable</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <!--添加iframe框架，跳转到配置层-->
        <div class="config-iframe-wrap">
            <!--直接将配置网页放到iframe下-->
            <!--<iframe id="config-iframe" name="config-content" src="item-config-index.html"></iframe>-->
            <!--通过点击图表的a标签target到此iframe下-->
            <iframe id="config-iframe" name="config-content" src="item-config-index.html"></iframe>
        </div>
    </div>
    <div class="menu-close"></div>

</body>
</html>
